<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../css/bootstrap.min.css"/>
		<link src="../../css/layer.css" type="text/javascript" charset="utf-8"></link>
		<link rel="stylesheet" type="text/css" href="../../css/common.css"/>
		<style type="text/css">
			.content .row{
				padding: 10px;
			}
			.content .row>div{
				padding-left:30px;
			}
			.content .row>div label{
				width: 100px;
				text-align: end;
				float: left;
				height:34px;
				line-height: 34px;
				margin-right: 20px;
			}
			.content .row>div>input{
				float: left;
				width: 74%;
			}
			.content .row>div>select{
				float: left;
				width: 74%;
			}
			.content .row>div textarea{
				float: left;
				width: 74%;
			}
			.add_tools{
				text-align: center;
			}
			.add_tools button{
				margin: 0 10px;
			}
			.propertyNav{
				margin-bottom:10px;
				display:none;
			}
			.propertyNav a{
				font-size:12px;
				margin:10px;
				color:#428bca;
			}
			.propertyNav a:hover{
				text-decoration: underline;
			}
			.property_leavel{
				display:none;
			}
		</style>
	</head>	
	<body>
		<div id="box">
			<div class="top_title">
				新增资产
			</div>
			<div class="propertyNav">
				<a href="property.html">资产列表</a>><a class="secondA" href="javascript:void(0)">新增资产</a>
			</div>
			<!--  -->
			<div class="content">
				<div class="row">
					<div class="col-sm-6">
						<label>资产名称 <span style="color:red">*</span>：</label>
    					<input type="text" class="form-control eName"  placeholder="资产名称">
					</div>
					<div class="col-sm-6">
						<label>资产IP：</label>
    					<input type="text" class="form-control eIp"  placeholder="资产IP">
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<label>主机名：</label>
    					<input type="text" class="form-control eHostName"  placeholder="主机名">
					</div>
					<div class="col-sm-6">
						<label>日志类型 <span style="color:red">*</span>：</label>
    					<select class="form-control eLogType">
    						<option disabled selected value></option>
 							<option value="1">syslog</option>
 							<option value="2">wmi</option>
 							<option value="3">snmp</option>
 							<option value="4">log4j</option>
 						</select>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<label>系统 <span style="color:red">*</span>：</label>
    					<!-- <select class="form-control">
    						<option disabled selected value></option>
 							<option value="1">AIX5</option>
 							<option value="2">Apache</option>
 							<option value="3">Big Iron</option>
 							<option value="4">Arcsight Express</option>
 							<option value="5">其他</option>
 						</select> -->
 						<input type="text" class="form-control eSystem"  placeholder="系统">
					</div>
					<div class="col-sm-6">
						<label>资产类别 <span style="color:red">*</span>：</label>
    					<div class="row" style="padding:0;width:74%;float: left;">  						
    						<div class="col-sm-4" style="padding:0;">
		 						<select class="form-control eBigType">
		 							<option value="0">网络</option>
		 							<option value="1">安全</option>
		 							<option value="2">主机</option>
		 							<option value="3">应用</option>
		 						</select>
		 					</div>
		 					<div class="col-sm-8" style="padding:0;">
		 						<select class="form-control eType" style="width:100%;">
		 							<option value="0101">交换机</option>
		 							<option value="0102">路由器</option>
		 							<option value="0103">防火墙</option>
		 						</select>
		 					</div>
    					</div>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<label>系统版本号 <span style="color:red"> </span>：</label>
    					<input type="text" class="form-control eSystemVersion"  placeholder="系统版本">
					</div>
					<div class="col-sm-6">
						<label>资产编号 <span style="color:red"> </span>：</label>
    					<input type="text" class="form-control eAssetNum"  placeholder="资产编号">
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<label>序列号 <span style="color:red"> </span>：</label>
    					<input type="text" class="form-control eSerialNum"  placeholder="序列号">
					</div>
					<div class="col-sm-6">
						<label>MAC地址 <span style="color:red"> </span>：</label>
    					<input type="text" class="form-control eMacAdress"  placeholder="MAC地址">
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<label>是否启用 <span style="color:red"> </span>：</label>
						<div style="padding:0;width:74%;float: left;">  
	    					<input type="radio" name="isWork" value="1" class="eStartUp" checked>是
	    					<input type="radio" name="isWork" value="0" class="eStartUp">否
    					</div>
					</div>	
					<div class="col-sm-6">
						<label>描述 <span style="color:red"> </span>：</label>
    					<textarea class="form-control eDescribe" rows="4"></textarea>
					</div>					
				</div>
				<div class="row">
					<div class="col-sm-6">
						<label>责任人<span style="color:red">*</span>：</label>
					 	<select class="form-control eUsername">
					 		<option disabled selected value></option>
 							<option value="1">系统管理员</option>
 						</select>				
					</div>	
					<div class="col-sm-6">
						<label>资产价值<span style="color:red"> </span>：</label>
    					<input type="text" class="form-control eValuation"  placeholder="资产价值">   					
					</div>	
					
					
				</div>
				<div class="row">
					<div class="col-sm-6">
						<label>保密性<span style="color:red">*</span>：</label>
    					<input type="text" class="form-control eConfidentiality"  placeholder="浮点型,介于1.0-5.0之间,只允许一位小数">   					
					</div>	
					<div class="col-sm-6">
						<label>完整性<span style="color:red">*</span>：</label>
    					<input type="text" class="form-control eIntegrity"  placeholder="浮点型,介于1.0-5.0之间,只允许一位小数">   					
					</div>						
				</div>
				<div class="row">
					<div class="col-sm-6">
						<label>可用性<span style="color:red">*</span>：</label>
    					<input type="text" class="form-control eUsability"  placeholder="浮点型,介于1.0-5.0之间,只允许一位小数">   					
					</div>				
				</div>
				<div class="row add_tools">
					<button class="btn btn-primary property_add">保存</button>
					<button class="btn btn-default property_leavel active">返回</button>
				</div>
			</div>
		</div>
		<script src="../../js/jquery-2.1.0.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/layer.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/ajax.js" type="text/javascript" charset="utf-8"></script>
		<script>
			
			//获得本地储存的资产Id
			var getId = sessionStorage.getItem("propertyId");//获取本地存储的设备值 对象
			//如果getId == null 说明不是从资产列表跳转过来的
			if(getId != null){
				$(".property_leavel").css("display","inline-block");
				$(".propertyNav").css("display","block")
				//区分 是添加按钮 还是修改按钮
				if(getId == "addBtn"){
					$(".secondA").html("新增资产")
				}else{					
					$(".secondA").html("修改资产信息")
					//修改标题
					$(".top_title").html("修改资产信息");
					var sfunc = function(data){
						//填充已经存在的信息
					}
					var  efunc = function(data){
						
					}
					//获取资产本身信息
					ajaxPostWithOutLayer("",{id:getId},sfunc,"",efunc);
					
				}
				//删除本地存储
				sessionStorage.removeItem("propertyId");
			}
			
			//二级下拉框 联动 数据源 
			var dTypeArr = [
				['<option value="0101">交换机</option>','<option value="0102">路由器</option>','<option value="0103">防火墙</option>'],
				['<option value="0201">IPS</option>','<option value="0202">IDS</option>','<option value="0202">抗DDOS</option>'],
				['<option value="0301">Windows</option>','<option value="0302">Linux</option>','<option value="0303">虚拟化</option>'],
				['<option value="0401">Tomcat</option>','<option value="0402">Apache</option>','<option value="0403">IIS</option>','<option value="0404">Weblogic</option>','<option value="0405">Mysql</option>','<option value="0406">Oracle</option>','<option value="0407">Sqlserver</option>','<option value="0408">Db2</option>']
			]
			//二级下拉框 函数
			$(".eBigType").change(function(){
				//获取一级下拉框中的值
			    var opt=$(".eBigType").val();
			    //清空二级下拉框中的内容
			    $(".eType").html('');
			    //往二级下拉框中循环添加内容 
			    for(var i in dTypeArr[opt]){
			    	$(".eType").append(dTypeArr[opt][i])
			    }
			   
			});
			
			
			//返回到资产列表
			$(".property_leavel").click(function(){
				location.href="property.html";
			}) 
			//保存提交 按钮
			$(".property_add").click(function(){
				//定义对象 存储资产数据 用于数据传递
				var obj = {};
				//获得数据
				obj.name = $(".eName").val();//资产名称
				obj.hostName = $(".eHostName").val();//主机名
				obj.type = $(".eType").val();//资产类型
				obj.ip = $(".eName").val();//资产Ip
				obj.macAdress = $(".eMacAdress").val();//MAC地址
				obj.startUp = $("input[name='isWork']:checked").val();//是否启用
				obj.logType = $(".eLogType").val();//日志类型
				obj.system = $(".eSystem").val();//系统
				obj.systemVersion = $(".eSystemVersion").val();//系统版本号
				obj.assetNum = $(".eAssetNum").val();//资产编号
				obj.serialNum = $(".eSerialNum").val();//序列号
				obj.describe = $(".eDescribe").val();//描述
				obj.confidentiality = $(".eConfidentiality").val();//保密性
				obj.integrity = $(".eIntegrity").val();//完整性
				obj.usability = $(".eUsability").val();//可用性
				obj.valuation = $(".eValuation").val();//资产价值
				obj.Username = $(".eUsername").val();//资产责任人
				//发送数据
				//成功回调函数
				var sfunc = function(data){
					layer.msg("添加成功",{icon:1});
					//重新加载谁被列表
					
				}
				//失败回调函数
				var efunc = function(data){
					layer.msg("添加失败",{icon:5});
					console.log(data);
				}
				//发送请求
				ajaxPostWithOutLayer("../../equipment/insert.do",obj,sfunc,"",efunc);
				//跳转到资产列表
				layer.msg("成功",{icon:"1"})
				if(getId != null){
					location.href="property.html";
				}
				
			})
		</script>
	</body>
</html>
